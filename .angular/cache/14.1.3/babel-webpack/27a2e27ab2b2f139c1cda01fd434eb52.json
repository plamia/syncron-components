{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { AsyncAction } from './AsyncAction';\nimport { Subscription } from '../Subscription';\nimport { AsyncScheduler } from './AsyncScheduler';\n\nvar VirtualTimeScheduler = function (_super) {\n  __extends(VirtualTimeScheduler, _super);\n\n  function VirtualTimeScheduler(schedulerActionCtor, maxFrames) {\n    if (schedulerActionCtor === void 0) {\n      schedulerActionCtor = VirtualAction;\n    }\n\n    if (maxFrames === void 0) {\n      maxFrames = Infinity;\n    }\n\n    var _this = _super.call(this, schedulerActionCtor, function () {\n      return _this.frame;\n    }) || this;\n\n    _this.maxFrames = maxFrames;\n    _this.frame = 0;\n    _this.index = -1;\n    return _this;\n  }\n\n  VirtualTimeScheduler.prototype.flush = function () {\n    var _a = this,\n        actions = _a.actions,\n        maxFrames = _a.maxFrames;\n\n    var error;\n    var action;\n\n    while ((action = actions[0]) && action.delay <= maxFrames) {\n      actions.shift();\n      this.frame = action.delay;\n\n      if (error = action.execute(action.state, action.delay)) {\n        break;\n      }\n    }\n\n    if (error) {\n      while (action = actions.shift()) {\n        action.unsubscribe();\n      }\n\n      throw error;\n    }\n  };\n\n  VirtualTimeScheduler.frameTimeFactor = 10;\n  return VirtualTimeScheduler;\n}(AsyncScheduler);\n\nexport { VirtualTimeScheduler };\n\nvar VirtualAction = function (_super) {\n  __extends(VirtualAction, _super);\n\n  function VirtualAction(scheduler, work, index) {\n    if (index === void 0) {\n      index = scheduler.index += 1;\n    }\n\n    var _this = _super.call(this, scheduler, work) || this;\n\n    _this.scheduler = scheduler;\n    _this.work = work;\n    _this.index = index;\n    _this.active = true;\n    _this.index = scheduler.index = index;\n    return _this;\n  }\n\n  VirtualAction.prototype.schedule = function (state, delay) {\n    if (delay === void 0) {\n      delay = 0;\n    }\n\n    if (Number.isFinite(delay)) {\n      if (!this.id) {\n        return _super.prototype.schedule.call(this, state, delay);\n      }\n\n      this.active = false;\n      var action = new VirtualAction(this.scheduler, this.work);\n      this.add(action);\n      return action.schedule(state, delay);\n    } else {\n      return Subscription.EMPTY;\n    }\n  };\n\n  VirtualAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n    if (delay === void 0) {\n      delay = 0;\n    }\n\n    this.delay = scheduler.frame + delay;\n    var actions = scheduler.actions;\n    actions.push(this);\n    actions.sort(VirtualAction.sortActions);\n    return true;\n  };\n\n  VirtualAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n    if (delay === void 0) {\n      delay = 0;\n    }\n\n    return undefined;\n  };\n\n  VirtualAction.prototype._execute = function (state, delay) {\n    if (this.active === true) {\n      return _super.prototype._execute.call(this, state, delay);\n    }\n  };\n\n  VirtualAction.sortActions = function (a, b) {\n    if (a.delay === b.delay) {\n      if (a.index === b.index) {\n        return 0;\n      } else if (a.index > b.index) {\n        return 1;\n      } else {\n        return -1;\n      }\n    } else if (a.delay > b.delay) {\n      return 1;\n    } else {\n      return -1;\n    }\n  };\n\n  return VirtualAction;\n}(AsyncAction);\n\nexport { VirtualAction }; //# sourceMappingURL=VirtualTimeScheduler.js.map","map":{"version":3,"names":["__extends","AsyncAction","Subscription","AsyncScheduler","VirtualTimeScheduler","_super","schedulerActionCtor","maxFrames","VirtualAction","Infinity","_this","call","frame","index","prototype","flush","_a","actions","error","action","delay","shift","execute","state","unsubscribe","frameTimeFactor","scheduler","work","active","schedule","Number","isFinite","id","add","EMPTY","requestAsyncId","push","sort","sortActions","recycleAsyncId","undefined","_execute","a","b"],"sources":["/Users/plamenakichukova/syncron-sdk-components/node_modules/rxjs/dist/esm5/internal/scheduler/VirtualTimeScheduler.js"],"sourcesContent":["import { __extends } from \"tslib\";\nimport { AsyncAction } from './AsyncAction';\nimport { Subscription } from '../Subscription';\nimport { AsyncScheduler } from './AsyncScheduler';\nvar VirtualTimeScheduler = (function (_super) {\n    __extends(VirtualTimeScheduler, _super);\n    function VirtualTimeScheduler(schedulerActionCtor, maxFrames) {\n        if (schedulerActionCtor === void 0) { schedulerActionCtor = VirtualAction; }\n        if (maxFrames === void 0) { maxFrames = Infinity; }\n        var _this = _super.call(this, schedulerActionCtor, function () { return _this.frame; }) || this;\n        _this.maxFrames = maxFrames;\n        _this.frame = 0;\n        _this.index = -1;\n        return _this;\n    }\n    VirtualTimeScheduler.prototype.flush = function () {\n        var _a = this, actions = _a.actions, maxFrames = _a.maxFrames;\n        var error;\n        var action;\n        while ((action = actions[0]) && action.delay <= maxFrames) {\n            actions.shift();\n            this.frame = action.delay;\n            if ((error = action.execute(action.state, action.delay))) {\n                break;\n            }\n        }\n        if (error) {\n            while ((action = actions.shift())) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    VirtualTimeScheduler.frameTimeFactor = 10;\n    return VirtualTimeScheduler;\n}(AsyncScheduler));\nexport { VirtualTimeScheduler };\nvar VirtualAction = (function (_super) {\n    __extends(VirtualAction, _super);\n    function VirtualAction(scheduler, work, index) {\n        if (index === void 0) { index = (scheduler.index += 1); }\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        _this.index = index;\n        _this.active = true;\n        _this.index = scheduler.index = index;\n        return _this;\n    }\n    VirtualAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) { delay = 0; }\n        if (Number.isFinite(delay)) {\n            if (!this.id) {\n                return _super.prototype.schedule.call(this, state, delay);\n            }\n            this.active = false;\n            var action = new VirtualAction(this.scheduler, this.work);\n            this.add(action);\n            return action.schedule(state, delay);\n        }\n        else {\n            return Subscription.EMPTY;\n        }\n    };\n    VirtualAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        this.delay = scheduler.frame + delay;\n        var actions = scheduler.actions;\n        actions.push(this);\n        actions.sort(VirtualAction.sortActions);\n        return true;\n    };\n    VirtualAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        return undefined;\n    };\n    VirtualAction.prototype._execute = function (state, delay) {\n        if (this.active === true) {\n            return _super.prototype._execute.call(this, state, delay);\n        }\n    };\n    VirtualAction.sortActions = function (a, b) {\n        if (a.delay === b.delay) {\n            if (a.index === b.index) {\n                return 0;\n            }\n            else if (a.index > b.index) {\n                return 1;\n            }\n            else {\n                return -1;\n            }\n        }\n        else if (a.delay > b.delay) {\n            return 1;\n        }\n        else {\n            return -1;\n        }\n    };\n    return VirtualAction;\n}(AsyncAction));\nexport { VirtualAction };\n//# sourceMappingURL=VirtualTimeScheduler.js.map"],"mappings":"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"},"metadata":{},"sourceType":"module"}