{"ast":null,"code":"function _toArray(arr) {\n  return _arrayWithHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.object.from-entries.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.object.entries.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.number.is-integer.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.search.js\";\nimport \"core-js/modules/es.promise.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.object.values.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.url.js\";\nimport \"core-js/modules/web.url-search-params.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.from.js\";\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nimport global from 'global';\nimport * as EVENTS from '@storybook/core-events';\nimport Channel from '@storybook/channels';\nimport { logger, pretty } from '@storybook/client-logger';\nimport { isJSON, parse, stringify } from 'telejson';\nimport qs from 'qs';\nvar globalWindow = global.window,\n    document = global.document,\n    location = global.location;\nexport var KEY = 'storybook-channel';\nvar defaultEventOptions = {\n  allowFunction: true,\n  maxDepth: 25\n}; // TODO: we should export a method for opening child windows here and keep track of em.\n// that way we can send postMessage to child windows as well, not just iframe\n// https://stackoverflow.com/questions/6340160/how-to-get-the-references-of-all-already-opened-child-windows\n\nexport var PostmsgTransport = /*#__PURE__*/function () {\n  function PostmsgTransport(config) {\n    _classCallCheck(this, PostmsgTransport);\n\n    this.config = config;\n    this.buffer = void 0;\n    this.handler = void 0;\n    this.connected = void 0;\n    this.buffer = [];\n    this.handler = null;\n    globalWindow.addEventListener('message', this.handleEvent.bind(this), false); // Check whether the config.page parameter has a valid value\n\n    if (config.page !== 'manager' && config.page !== 'preview') {\n      throw new Error(\"postmsg-channel: \\\"config.page\\\" cannot be \\\"\".concat(config.page, \"\\\"\"));\n    }\n  }\n\n  _createClass(PostmsgTransport, [{\n    key: \"setHandler\",\n    value: function setHandler(handler) {\n      var _this = this;\n\n      this.handler = function () {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        handler.apply(_this, args);\n\n        if (!_this.connected && _this.getLocalFrame().length) {\n          _this.flush();\n\n          _this.connected = true;\n        }\n      };\n    }\n    /**\n     * Sends `event` to the associated window. If the window does not yet exist\n     * the event will be stored in a buffer and sent when the window exists.\n     * @param event\n     */\n\n  }, {\n    key: \"send\",\n    value: function send(event, options) {\n      var _this2 = this;\n\n      var _ref = options || {},\n          target = _ref.target,\n          allowRegExp = _ref.allowRegExp,\n          allowFunction = _ref.allowFunction,\n          allowSymbol = _ref.allowSymbol,\n          allowDate = _ref.allowDate,\n          allowUndefined = _ref.allowUndefined,\n          allowClass = _ref.allowClass,\n          maxDepth = _ref.maxDepth,\n          space = _ref.space,\n          lazyEval = _ref.lazyEval;\n\n      var eventOptions = Object.fromEntries(Object.entries({\n        allowRegExp: allowRegExp,\n        allowFunction: allowFunction,\n        allowSymbol: allowSymbol,\n        allowDate: allowDate,\n        allowUndefined: allowUndefined,\n        allowClass: allowClass,\n        maxDepth: maxDepth,\n        space: space,\n        lazyEval: lazyEval\n      }).filter(function (_ref2) {\n        var _ref3 = _slicedToArray(_ref2, 2),\n            k = _ref3[0],\n            v = _ref3[1];\n\n        return typeof v !== 'undefined';\n      }));\n      var stringifyOptions = Object.assign({}, defaultEventOptions, global.CHANNEL_OPTIONS || {}, eventOptions); // backwards compat: convert depth to maxDepth\n\n      if (options && Number.isInteger(options.depth)) {\n        stringifyOptions.maxDepth = options.depth;\n      }\n\n      var frames = this.getFrames(target);\n      var query = qs.parse(location.search, {\n        ignoreQueryPrefix: true\n      });\n      var data = stringify({\n        key: KEY,\n        event: event,\n        refId: query.refId\n      }, stringifyOptions);\n\n      if (!frames.length) {\n        return new Promise(function (resolve, reject) {\n          _this2.buffer.push({\n            event: event,\n            resolve: resolve,\n            reject: reject\n          });\n        });\n      }\n\n      if (this.buffer.length) {\n        this.flush();\n      }\n\n      frames.forEach(function (f) {\n        try {\n          f.postMessage(data, '*');\n        } catch (e) {\n          console.error('sending over postmessage fail');\n        }\n      });\n      return Promise.resolve(null);\n    }\n  }, {\n    key: \"flush\",\n    value: function flush() {\n      var _this3 = this;\n\n      var buffer = this.buffer;\n      this.buffer = [];\n      buffer.forEach(function (item) {\n        _this3.send(item.event).then(item.resolve).catch(item.reject);\n      });\n    }\n  }, {\n    key: \"getFrames\",\n    value: function getFrames(target) {\n      if (this.config.page === 'manager') {\n        var nodes = _toConsumableArray(document.querySelectorAll('iframe[data-is-storybook][data-is-loaded]'));\n\n        var list = nodes.filter(function (e) {\n          try {\n            return !!e.contentWindow && e.dataset.isStorybook !== undefined && e.id === target;\n          } catch (er) {\n            return false;\n          }\n        }).map(function (e) {\n          return e.contentWindow;\n        });\n        return list.length ? list : this.getCurrentFrames();\n      }\n\n      if (globalWindow && globalWindow.parent && globalWindow.parent !== globalWindow) {\n        return [globalWindow.parent];\n      }\n\n      return [];\n    }\n  }, {\n    key: \"getCurrentFrames\",\n    value: function getCurrentFrames() {\n      if (this.config.page === 'manager') {\n        var list = _toConsumableArray(document.querySelectorAll('[data-is-storybook=\"true\"]'));\n\n        return list.map(function (e) {\n          return e.contentWindow;\n        });\n      }\n\n      if (globalWindow && globalWindow.parent) {\n        return [globalWindow.parent];\n      }\n\n      return [];\n    }\n  }, {\n    key: \"getLocalFrame\",\n    value: function getLocalFrame() {\n      if (this.config.page === 'manager') {\n        var list = _toConsumableArray(document.querySelectorAll('#storybook-preview-iframe'));\n\n        return list.map(function (e) {\n          return e.contentWindow;\n        });\n      }\n\n      if (globalWindow && globalWindow.parent) {\n        return [globalWindow.parent];\n      }\n\n      return [];\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(rawEvent) {\n      try {\n        var data = rawEvent.data;\n\n        var _ref4 = typeof data === 'string' && isJSON(data) ? parse(data, global.CHANNEL_OPTIONS || {}) : data,\n            key = _ref4.key,\n            event = _ref4.event,\n            refId = _ref4.refId;\n\n        if (key === KEY) {\n          var pageString = this.config.page === 'manager' ? \"<span style=\\\"color: #37D5D3; background: black\\\"> manager </span>\" : \"<span style=\\\"color: #1EA7FD; background: black\\\"> preview </span>\";\n          var eventString = Object.values(EVENTS).includes(event.type) ? \"<span style=\\\"color: #FF4785\\\">\".concat(event.type, \"</span>\") : \"<span style=\\\"color: #FFAE00\\\">\".concat(event.type, \"</span>\");\n\n          if (refId) {\n            event.refId = refId;\n          }\n\n          event.source = this.config.page === 'preview' ? rawEvent.origin : getEventSourceUrl(rawEvent);\n\n          if (!event.source) {\n            pretty.error(\"\".concat(pageString, \" received \").concat(eventString, \" but was unable to determine the source of the event\"));\n            return;\n          }\n\n          var message = \"\".concat(pageString, \" received \").concat(eventString, \" (\").concat(data.length, \")\");\n          pretty.debug.apply(pretty, [location.origin !== event.source ? message : \"\".concat(message, \" <span style=\\\"color: gray\\\">(on \").concat(location.origin, \" from \").concat(event.source, \")</span>\")].concat(_toConsumableArray(event.args)));\n          this.handler(event);\n        }\n      } catch (error) {\n        logger.error(error);\n      }\n    }\n  }]);\n\n  return PostmsgTransport;\n}();\n\nvar getEventSourceUrl = function getEventSourceUrl(event) {\n  var frames = _toConsumableArray(document.querySelectorAll('iframe[data-is-storybook]')); // try to find the originating iframe by matching it's contentWindow\n  // This might not be cross-origin safe\n\n\n  var _frames$filter = frames.filter(function (element) {\n    try {\n      return element.contentWindow === event.source;\n    } catch (err) {// continue\n    }\n\n    var src = element.getAttribute('src');\n    var origin;\n\n    try {\n      var _URL = new URL(src, document.location);\n\n      origin = _URL.origin;\n    } catch (err) {\n      return false;\n    }\n\n    return origin === event.origin;\n  }),\n      _frames$filter2 = _toArray(_frames$filter),\n      frame = _frames$filter2[0],\n      remainder = _frames$filter2.slice(1);\n\n  if (frame && remainder.length === 0) {\n    var src = frame.getAttribute('src');\n\n    var _URL2 = new URL(src, document.location),\n        protocol = _URL2.protocol,\n        host = _URL2.host,\n        pathname = _URL2.pathname;\n\n    return \"\".concat(protocol, \"//\").concat(host).concat(pathname);\n  }\n\n  if (remainder.length > 0) {\n    // If we found multiple matches, there's going to be trouble\n    logger.error('found multiple candidates for event source');\n  } // If we found no frames of matches\n\n\n  return null;\n};\n/**\n * Creates a channel which communicates with an iframe or child window.\n */\n\n\nexport default function createChannel(_ref5) {\n  var page = _ref5.page;\n  var transport = new PostmsgTransport({\n    page: page\n  });\n  return new Channel({\n    transport: transport\n  });\n}","map":{"version":3,"names":["_toArray","arr","_arrayWithHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableRest","_toConsumableArray","_arrayWithoutHoles","_nonIterableSpread","TypeError","iter","Symbol","iterator","Array","from","isArray","_arrayLikeToArray","_slicedToArray","i","_iterableToArrayLimit","o","minLen","n","Object","prototype","toString","call","slice","constructor","name","test","len","length","arr2","_i","_arr","_n","_d","_s","_e","next","done","push","value","err","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","protoProps","staticProps","global","EVENTS","Channel","logger","pretty","isJSON","parse","stringify","qs","globalWindow","window","document","location","KEY","defaultEventOptions","allowFunction","maxDepth","PostmsgTransport","config","buffer","handler","connected","addEventListener","handleEvent","bind","page","Error","concat","setHandler","_this","_len","arguments","args","_key","apply","getLocalFrame","flush","send","event","options","_this2","_ref","allowRegExp","allowSymbol","allowDate","allowUndefined","allowClass","space","lazyEval","eventOptions","fromEntries","entries","filter","_ref2","_ref3","k","v","stringifyOptions","assign","CHANNEL_OPTIONS","Number","isInteger","depth","frames","getFrames","query","search","ignoreQueryPrefix","data","refId","Promise","resolve","reject","forEach","f","postMessage","e","console","error","_this3","item","then","catch","nodes","querySelectorAll","list","contentWindow","dataset","isStorybook","undefined","id","er","map","getCurrentFrames","parent","rawEvent","_ref4","pageString","eventString","values","includes","type","source","origin","getEventSourceUrl","message","debug","_frames$filter","element","src","getAttribute","_URL","URL","_frames$filter2","frame","remainder","_URL2","protocol","host","pathname","createChannel","_ref5","transport"],"sources":["/Users/plamenakichukova/syncron-sdk-components/node_modules/@storybook/channel-postmessage/dist/esm/index.js"],"sourcesContent":["function _toArray(arr) { return _arrayWithHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableRest(); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.object.from-entries.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.object.entries.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.number.is-integer.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.search.js\";\nimport \"core-js/modules/es.promise.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.object.values.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.url.js\";\nimport \"core-js/modules/web.url-search-params.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.from.js\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport global from 'global';\nimport * as EVENTS from '@storybook/core-events';\nimport Channel from '@storybook/channels';\nimport { logger, pretty } from '@storybook/client-logger';\nimport { isJSON, parse, stringify } from 'telejson';\nimport qs from 'qs';\nvar globalWindow = global.window,\n    document = global.document,\n    location = global.location;\nexport var KEY = 'storybook-channel';\nvar defaultEventOptions = {\n  allowFunction: true,\n  maxDepth: 25\n}; // TODO: we should export a method for opening child windows here and keep track of em.\n// that way we can send postMessage to child windows as well, not just iframe\n// https://stackoverflow.com/questions/6340160/how-to-get-the-references-of-all-already-opened-child-windows\n\nexport var PostmsgTransport = /*#__PURE__*/function () {\n  function PostmsgTransport(config) {\n    _classCallCheck(this, PostmsgTransport);\n\n    this.config = config;\n    this.buffer = void 0;\n    this.handler = void 0;\n    this.connected = void 0;\n    this.buffer = [];\n    this.handler = null;\n    globalWindow.addEventListener('message', this.handleEvent.bind(this), false); // Check whether the config.page parameter has a valid value\n\n    if (config.page !== 'manager' && config.page !== 'preview') {\n      throw new Error(\"postmsg-channel: \\\"config.page\\\" cannot be \\\"\".concat(config.page, \"\\\"\"));\n    }\n  }\n\n  _createClass(PostmsgTransport, [{\n    key: \"setHandler\",\n    value: function setHandler(handler) {\n      var _this = this;\n\n      this.handler = function () {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        handler.apply(_this, args);\n\n        if (!_this.connected && _this.getLocalFrame().length) {\n          _this.flush();\n\n          _this.connected = true;\n        }\n      };\n    }\n    /**\n     * Sends `event` to the associated window. If the window does not yet exist\n     * the event will be stored in a buffer and sent when the window exists.\n     * @param event\n     */\n\n  }, {\n    key: \"send\",\n    value: function send(event, options) {\n      var _this2 = this;\n\n      var _ref = options || {},\n          target = _ref.target,\n          allowRegExp = _ref.allowRegExp,\n          allowFunction = _ref.allowFunction,\n          allowSymbol = _ref.allowSymbol,\n          allowDate = _ref.allowDate,\n          allowUndefined = _ref.allowUndefined,\n          allowClass = _ref.allowClass,\n          maxDepth = _ref.maxDepth,\n          space = _ref.space,\n          lazyEval = _ref.lazyEval;\n\n      var eventOptions = Object.fromEntries(Object.entries({\n        allowRegExp: allowRegExp,\n        allowFunction: allowFunction,\n        allowSymbol: allowSymbol,\n        allowDate: allowDate,\n        allowUndefined: allowUndefined,\n        allowClass: allowClass,\n        maxDepth: maxDepth,\n        space: space,\n        lazyEval: lazyEval\n      }).filter(function (_ref2) {\n        var _ref3 = _slicedToArray(_ref2, 2),\n            k = _ref3[0],\n            v = _ref3[1];\n\n        return typeof v !== 'undefined';\n      }));\n      var stringifyOptions = Object.assign({}, defaultEventOptions, global.CHANNEL_OPTIONS || {}, eventOptions); // backwards compat: convert depth to maxDepth\n\n      if (options && Number.isInteger(options.depth)) {\n        stringifyOptions.maxDepth = options.depth;\n      }\n\n      var frames = this.getFrames(target);\n      var query = qs.parse(location.search, {\n        ignoreQueryPrefix: true\n      });\n      var data = stringify({\n        key: KEY,\n        event: event,\n        refId: query.refId\n      }, stringifyOptions);\n\n      if (!frames.length) {\n        return new Promise(function (resolve, reject) {\n          _this2.buffer.push({\n            event: event,\n            resolve: resolve,\n            reject: reject\n          });\n        });\n      }\n\n      if (this.buffer.length) {\n        this.flush();\n      }\n\n      frames.forEach(function (f) {\n        try {\n          f.postMessage(data, '*');\n        } catch (e) {\n          console.error('sending over postmessage fail');\n        }\n      });\n      return Promise.resolve(null);\n    }\n  }, {\n    key: \"flush\",\n    value: function flush() {\n      var _this3 = this;\n\n      var buffer = this.buffer;\n      this.buffer = [];\n      buffer.forEach(function (item) {\n        _this3.send(item.event).then(item.resolve).catch(item.reject);\n      });\n    }\n  }, {\n    key: \"getFrames\",\n    value: function getFrames(target) {\n      if (this.config.page === 'manager') {\n        var nodes = _toConsumableArray(document.querySelectorAll('iframe[data-is-storybook][data-is-loaded]'));\n\n        var list = nodes.filter(function (e) {\n          try {\n            return !!e.contentWindow && e.dataset.isStorybook !== undefined && e.id === target;\n          } catch (er) {\n            return false;\n          }\n        }).map(function (e) {\n          return e.contentWindow;\n        });\n        return list.length ? list : this.getCurrentFrames();\n      }\n\n      if (globalWindow && globalWindow.parent && globalWindow.parent !== globalWindow) {\n        return [globalWindow.parent];\n      }\n\n      return [];\n    }\n  }, {\n    key: \"getCurrentFrames\",\n    value: function getCurrentFrames() {\n      if (this.config.page === 'manager') {\n        var list = _toConsumableArray(document.querySelectorAll('[data-is-storybook=\"true\"]'));\n\n        return list.map(function (e) {\n          return e.contentWindow;\n        });\n      }\n\n      if (globalWindow && globalWindow.parent) {\n        return [globalWindow.parent];\n      }\n\n      return [];\n    }\n  }, {\n    key: \"getLocalFrame\",\n    value: function getLocalFrame() {\n      if (this.config.page === 'manager') {\n        var list = _toConsumableArray(document.querySelectorAll('#storybook-preview-iframe'));\n\n        return list.map(function (e) {\n          return e.contentWindow;\n        });\n      }\n\n      if (globalWindow && globalWindow.parent) {\n        return [globalWindow.parent];\n      }\n\n      return [];\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(rawEvent) {\n      try {\n        var data = rawEvent.data;\n\n        var _ref4 = typeof data === 'string' && isJSON(data) ? parse(data, global.CHANNEL_OPTIONS || {}) : data,\n            key = _ref4.key,\n            event = _ref4.event,\n            refId = _ref4.refId;\n\n        if (key === KEY) {\n          var pageString = this.config.page === 'manager' ? \"<span style=\\\"color: #37D5D3; background: black\\\"> manager </span>\" : \"<span style=\\\"color: #1EA7FD; background: black\\\"> preview </span>\";\n          var eventString = Object.values(EVENTS).includes(event.type) ? \"<span style=\\\"color: #FF4785\\\">\".concat(event.type, \"</span>\") : \"<span style=\\\"color: #FFAE00\\\">\".concat(event.type, \"</span>\");\n\n          if (refId) {\n            event.refId = refId;\n          }\n\n          event.source = this.config.page === 'preview' ? rawEvent.origin : getEventSourceUrl(rawEvent);\n\n          if (!event.source) {\n            pretty.error(\"\".concat(pageString, \" received \").concat(eventString, \" but was unable to determine the source of the event\"));\n            return;\n          }\n\n          var message = \"\".concat(pageString, \" received \").concat(eventString, \" (\").concat(data.length, \")\");\n          pretty.debug.apply(pretty, [location.origin !== event.source ? message : \"\".concat(message, \" <span style=\\\"color: gray\\\">(on \").concat(location.origin, \" from \").concat(event.source, \")</span>\")].concat(_toConsumableArray(event.args)));\n          this.handler(event);\n        }\n      } catch (error) {\n        logger.error(error);\n      }\n    }\n  }]);\n\n  return PostmsgTransport;\n}();\n\nvar getEventSourceUrl = function getEventSourceUrl(event) {\n  var frames = _toConsumableArray(document.querySelectorAll('iframe[data-is-storybook]')); // try to find the originating iframe by matching it's contentWindow\n  // This might not be cross-origin safe\n\n\n  var _frames$filter = frames.filter(function (element) {\n    try {\n      return element.contentWindow === event.source;\n    } catch (err) {// continue\n    }\n\n    var src = element.getAttribute('src');\n    var origin;\n\n    try {\n      var _URL = new URL(src, document.location);\n\n      origin = _URL.origin;\n    } catch (err) {\n      return false;\n    }\n\n    return origin === event.origin;\n  }),\n      _frames$filter2 = _toArray(_frames$filter),\n      frame = _frames$filter2[0],\n      remainder = _frames$filter2.slice(1);\n\n  if (frame && remainder.length === 0) {\n    var src = frame.getAttribute('src');\n\n    var _URL2 = new URL(src, document.location),\n        protocol = _URL2.protocol,\n        host = _URL2.host,\n        pathname = _URL2.pathname;\n\n    return \"\".concat(protocol, \"//\").concat(host).concat(pathname);\n  }\n\n  if (remainder.length > 0) {\n    // If we found multiple matches, there's going to be trouble\n    logger.error('found multiple candidates for event source');\n  } // If we found no frames of matches\n\n\n  return null;\n};\n/**\n * Creates a channel which communicates with an iframe or child window.\n */\n\n\nexport default function createChannel(_ref5) {\n  var page = _ref5.page;\n  var transport = new PostmsgTransport({\n    page: page\n  });\n  return new Channel({\n    transport: transport\n  });\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}